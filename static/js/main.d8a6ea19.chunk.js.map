{"version":3,"sources":["../../src/MeasurableCell.js","../../src/MeasurableList.js","../../src/index.js","utils.js","App.js","index.js"],"names":["MeasurableCell","children","index","onMeasure","id","ref","useRef","useEffect","height","style","overflow","MeasurableList","data","onMeasurementFinish","width","mapping","handleMeasure","Object","overflowY","key","command","forwardRef","layout","variableSizeListProps","useState","measuring","setMeasuring","measurements","setMeasurements","localRef","newMeasurements","itemSize","itemCount","length","possibleOutputs","commands","_","range","map","title","input","output","sample","App","filter","setFilter","row","setRow","dynamicListRef","filteredCommands","JSON","stringify","includes","className","value","onChange","event","target","placeholder","min","max","step","onClick","current","scrollToItem","whiteSpace","ReactDOM","render","document","getElementById"],"mappings":"+aAKA,IAAMA,EAAiB,SAAC,GAAuC,IAArCC,EAAqC,EAArCA,SAAUC,EAA2B,EAA3BA,MAAOC,EAAoB,EAApBA,UAAWC,EAAS,EAATA,GAC9CC,EAAMC,mBAMZ,OAJAC,qBAAU,WACRJ,EAAU,CAAEK,OAAQH,UAAV,aAAoCD,SADhDG,IAME,yBAAKE,MAAO,CAAEC,SAAU,QAAUL,IAAKA,GACpCJ,EAAS,CAAEC,YCRZS,EAAiB,SAAC,GAMlB,IALJV,EAKI,EALJA,SACAW,EAII,EAJJA,KACAC,EAGI,EAHJA,oBACAC,EAEI,EAFJA,MACAN,EACI,EADJA,OAEMO,EAAN,GAEMC,EAAgB,SAAC,GAAmB,IAAjBZ,EAAiB,EAAjBA,GAAII,EAAa,EAAbA,OAC3BO,OACIE,0BAAkCL,EAAtC,QACEC,MAIJ,OACE,yBAAKJ,MAAO,CAAEK,MAAF,EAASN,OAAT,EAAiBU,UAAW,SACrCN,EAAA,KAAS,qBACR,qBACEO,IAAKC,EADP,GAEEjB,UAFF,EAGEC,GAAIgB,EAHN,GAIElB,MAAOA,GALD,Q,EC0DDmB,sBA1DK,SAAC,EAAD,GAUf,IARDpB,EAQC,EARDA,SACAW,EAOC,EAPDA,KACAJ,EAMC,EANDA,OACAM,EAKC,EALDA,MAKC,IAJDQ,cAIC,MAJQ,WAIR,EAHEC,E,oIAGF,oDAC+BC,oBAD/B,GACIC,EADJ,KACeC,EADf,OAEqCF,mBAFrC,IAEIG,EAFJ,KAEkBC,EAFlB,KAGGC,EAAWxB,GAAOC,mBAKxBC,qBAAU,WACJsB,EAAJ,SACEA,+BAED,CAACjB,EAJJL,SAgBA,OAAQkB,EAaN,qBACEjB,OADF,EAEEM,MAFF,EAGEF,KAHF,EAIEC,oBA3B4B,SAAAiB,GAC9BF,KACAF,QAQF,GACE,yBACEJ,OADF,EAEEjB,IAFF,EAGE0B,SATa,SAAA7B,GAEf,OADeyB,EAAaf,KAA5B,KASEJ,OAJF,EAKEM,MALF,EAMEkB,UAAWpB,EAAKqB,QANlB,GADK,M,yBCzDF,MAAMC,EAAkB,CAAC,mwGAAD,8hC,0CCQ/B,MAAMC,ED0DFC,IAAEC,MAAM,EAAG,KAAMC,IAAIpC,IAAK,CACtBE,GAAIF,EACJqC,MAAM,cAAD,OAAgBrC,GACrBsC,MAAM,cAAD,OAAgBtC,GACrBuC,OAAQL,IAAEM,OAAOR,MClBVS,MAzCH,KAAO,MAAD,EACYnB,mBAAS,IADrB,mBACToB,EADS,KACDC,EADC,OAEMrB,mBAAS,GAFf,mBAETsB,EAFS,KAEJC,EAFI,KAGVC,EAAiB1C,mBACjB2C,EAAmBd,EAASS,OAAOxB,GAAW8B,KAAKC,UAAU/B,GAASgC,SAASR,IAYrF,OAAO,6BACL,gCACE,qDAEF,iCACE,yBAAKS,UAAU,oBACb,kBAAC,IAAD,CAAOC,MAAOV,EAAQW,SAhBAC,IAC1BX,EAAUW,EAAMC,OAAOH,QAeiCI,YAAY,qBAChE,kBAAC,IAAD,CAAaC,IAAK,EAAGC,IAAKX,EAAiBhB,OAAS,EAAG4B,KAAM,GAAIN,SAAUR,EAAQO,MAAOR,IAC1F,kBAAC,IAAD,CAAQgB,QAdI,KACZd,EAAee,SACjBf,EAAee,QAAQC,aAAalB,EAAK,WAYvC,YAEF,8BAEA,yBAAKO,UAAU,0BACb,kBAAC,EAAD,CAAahD,IAAK2C,EAAgBpC,KAAMqC,EAAkBnC,MAAO,IAAKN,OAAQ,KAC3E,EAAGN,QAAOO,WACT,yBAAKA,MAAOA,GACV,yBAAKA,MAAO,CAAEwD,WAAY,YAAchB,EAAiB/C,GAAOuC,QAAc,UCvC5FyB,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,U","file":"static/js/main.d8a6ea19.chunk.js","sourcesContent":["import React, { useEffect, useRef } from \"react\";\n\n/**\n * A small wrapper which calculate the height of its children.\n */\nconst MeasurableCell = ({ children, index, onMeasure, id }) => {\n  const ref = useRef();\n\n  useEffect(() => {\n    onMeasure({ height: ref.current.offsetHeight, id });\n  }, []);\n\n  return (\n    // overflow auto is used here in order to catch the margin and padding as part of the height.\n    <div style={{ overflow: \"auto\" }} ref={ref}>\n      {children({ index })}\n    </div>\n  );\n};\n\nexport default MeasurableCell;\n","import React from \"react\";\nimport MeasurableCell from \"./MeasurableCell\";\n\n/**\n * The temporary list that is rendered at the beginning in order to\n * calculate the size of all the items in the list.\n */\nconst MeasurableList = ({\n  children,\n  data,\n  onMeasurementFinish,\n  width,\n  height\n}) => {\n  const mapping = {};\n\n  const handleMeasure = ({ id, height }) => {\n    mapping[id] = height;\n    if (Object.values(mapping).length === data.length) {\n      onMeasurementFinish(mapping);\n    }\n  };\n\n  return (\n    <div style={{ width, height, overflowY: \"auto\" }}>\n      {data.map((command, index) => (\n        <MeasurableCell\n          key={command.id}\n          onMeasure={handleMeasure}\n          id={command.id}\n          index={index}\n        >\n          {children}\n        </MeasurableCell>\n      ))}\n    </div>\n  );\n};\n\nexport default MeasurableList;\n","import React, { useState, useEffect, forwardRef, useRef } from \"react\";\nimport { VariableSizeList } from \"react-window\";\nimport MeasurableList from \"./MeasurableList\";\n\n/**\n * TL;DR\n * A virtualized list which handles item of varying sizes.\n *\n * This solution is a really naive one, basically we do the following actions:\n * 1. Render the whole list, without windowing!\n * 2. measure all of the cells and cache the size.\n * 3. Remove the list.\n * 4. Render the virtualized list using the cached sizes.\n *\n * Restrictions:\n * This solution will only work in the following cases\n * 1. It is feasible and possible (you have all of the data at hand) to load the data at the beginning for a brief time.\n * 2. Your data doesn't change size\n * 3. You don't add new items to the list (filtering works :))\n * 4. Currently this only supports vertical layout. (didn't have time to implement support for horizontal)\n *\n * Requirements:\n * In order for the cache to work each item in your data set must have an id which isn't based on\n * the items index (or else filtering will fail).\n */\nconst DynamicList = (\n  {\n    children,\n    data,\n    height,\n    width,\n    layout = \"vertical\",\n    ...variableSizeListProps\n  },\n  ref\n) => {\n  const [measuring, setMeasuring] = useState(true);\n  const [measurements, setMeasurements] = useState({});\n  const localRef = ref || useRef();\n\n  /**\n   * In case the data length changed we need to reassign the current size to all of the indexes.\n   */\n  useEffect(() => {\n    if (localRef.current) {\n      localRef.current.resetAfterIndex(0);\n    }\n  }, [data.length]);\n\n  const handleMeasurementFinish = newMeasurements => {\n    setMeasurements(newMeasurements);\n    setMeasuring(false);\n  };\n\n  const itemSize = index => {\n    const height = measurements[data[index].id];\n    return height;\n  };\n\n  return !measuring ? (\n    <VariableSizeList\n      layout={layout}\n      ref={localRef}\n      itemSize={itemSize}\n      height={height}\n      width={width}\n      itemCount={data.length}\n      {...variableSizeListProps}\n    >\n      {children}\n    </VariableSizeList>\n  ) : (\n    <MeasurableList\n      height={height}\n      width={width}\n      data={data}\n      onMeasurementFinish={handleMeasurementFinish}\n    >\n      {children}\n    </MeasurableList>\n  );\n};\n\nexport default forwardRef(DynamicList);\n","import _ from \"lodash\";\n\nexport const possibleOutputs = [\n    `Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n    Duis non nulla rhoncus, suscipit dolor nec, vehicula leo.\n    Curabitur ac metus eu nisl venenatis dapibus.\n    Fusce ornare erat ut urna laoreet, non venenatis enim varius.\n    Maecenas quis lacus finibus, dictum neque ac, pretium mi.\n    Aliquam pretium lorem ac nulla tincidunt laoreet.\n    Quisque feugiat urna eget facilisis mollis.\n    Cras imperdiet libero vitae elementum tristique.\n    In vestibulum purus a risus sollicitudin bibendum.\n    Praesent non purus varius, venenatis ante eget, imperdiet nisl.\n    Mauris ut dui tempus, suscipit neque sed, tempor libero.\n    Praesent eget nisi sed nunc porta egestas.\n    Suspendisse eget nunc et mi hendrerit tincidunt.\n    Vestibulum nec velit molestie, lacinia sapien sit amet, porta dolor.\n    Vivamus ac lectus suscipit, blandit augue eu, tempor dui.\n    Duis varius justo at euismod ultricies.\n    In sit amet lectus dignissim, tempus velit quis, posuere arcu.\n    Nunc vel erat et enim consequat pretium sed eget ex.\n    Integer cursus dui at nunc faucibus mattis.\n    Integer tempor urna ut malesuada pellentesque.\n    Donec consectetur ligula quis urna auctor eleifend.\n    Phasellus id diam et nunc lacinia vulputate vitae ac erat.\n    Curabitur cursus neque eget purus iaculis, eu blandit dui commodo.\n    Sed vel quam vitae urna ornare gravida.\n    Phasellus feugiat ex sit amet urna viverra porttitor et id ligula.\n    Nullam pretium odio vitae nibh semper tincidunt.\n    Aenean in nunc semper, congue nibh interdum, gravida neque.\n    Cras tincidunt nibh id dictum vehicula.\n    Phasellus suscipit tellus ut ex malesuada, aliquet aliquet massa lobortis.\n    Integer porttitor erat eget ante mollis accumsan.\n    Morbi id arcu vel dui fringilla accumsan.\n    Donec vel nulla a lacus convallis interdum.\n    Curabitur consectetur turpis at leo egestas iaculis.\n    Maecenas vitae mauris egestas, imperdiet turpis at, convallis mauris.\n    Vestibulum blandit felis placerat urna tincidunt, eu vestibulum quam pulvinar.\n    Duis hendrerit nulla vitae nulla egestas, eu hendrerit sapien consequat.\n    Duis facilisis nibh a sodales hendrerit.\n    Fusce aliquam erat ac blandit commodo.\n    Pellentesque elementum nunc id odio fermentum cursus.\n    Sed non elit placerat, porta elit vel, mollis orci.\n    Aliquam ac dolor volutpat, dapibus libero vel, suscipit eros.\n    Praesent egestas lacus at odio porttitor, finibus sodales neque aliquet.\n    Nulla facilisis nulla rutrum viverra scelerisque.\n    Sed eget nisi scelerisque, tincidunt tortor quis, tristique justo.\n    Pellentesque et felis vestibulum, placerat diam sit amet, pulvinar ex.\n    Nulla et odio non mi tincidunt dapibus nec at sapien.\n    Quisque quis urna non purus porttitor sagittis lobortis quis risus.\n    Aenean egestas enim eu placerat volutpat.\n    Ut sed ante in mauris laoreet tincidunt.\n    Quisque viverra ipsum interdum magna porta, vitae tempus ligula vehicula.\n    Integer laoreet sem id erat lobortis fermentum.\n    Quisque consectetur massa et dapibus convallis.\n    Maecenas id nunc id velit posuere congue in vel risus.\n    Proin quis est et risus interdum varius.\n    Nunc a urna vel turpis aliquet interdum.\n    Praesent elementum velit vel eleifend scelerisque.`,\n    `Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec nec est et libero dignissim aliquet in a nisi. Sed nunc lacus, consequat eget ante sed, interdum accumsan tellus. Nulla in augue velit. Duis erat massa, tincidunt nec aliquam facilisis, mattis vel arcu. Integer eu nisl eu eros fermentum fermentum nec sed arcu. Etiam rhoncus tempor rhoncus. Cras suscipit pellentesque ullamcorper.\n\n    Integer dapibus tristique urna, nec semper libero pellentesque eu. Mauris finibus magna suscipit lacus elementum gravida. Morbi massa elit, mollis sed vehicula fermentum, convallis quis erat. Nam non magna bibendum, cursus urna ac, aliquet leo. Donec vulputate pretium malesuada. Quisque eget sollicitudin urna, non mollis sapien. Integer sagittis, nulla facilisis ultricies tempus, ante lorem dictum turpis, sed vestibulum enim purus at ligula. Fusce tempor, nibh non tincidunt dictum, leo enim posuere massa, id laoreet magna nunc pellentesque felis. Sed vitae interdum nulla. Aliquam dui libero, efficitur at mi sit amet.`,\n    `\n    I am small\n    `,\n]\n\nexport const generateCommands = () => (\n    _.range(0, 1000).map(index => ({\n        id: index,\n        title: `some title ${index}`,\n        input: `some input ${index}`,\n        output: _.sample(possibleOutputs)\n    }))\n)","import React, { useState, useRef } from 'react'\n\nimport DynamicList from 'react-window-dynamic-list'\nimport 'react-window-dynamic-list/dist/index.css'\nimport { generateCommands } from \"./utils\";\nimport { Input, InputNumber, Button } from \"antd\";\n\nimport \"antd/dist/antd.compact.min.css\"\nimport \"./App.css\"\n\nconst commands = generateCommands();\n\n\nconst App = () => {\n  const [filter, setFilter] = useState(\"\");\n  const [row, setRow] = useState(0);\n  const dynamicListRef = useRef();\n  const filteredCommands = commands.filter(command => JSON.stringify(command).includes(filter));\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value);\n  }\n\n  const jumpToRow = () => {\n    if (dynamicListRef.current) {\n      dynamicListRef.current.scrollToItem(row, \"start\")\n    }\n  }\n\n  return <div>\n    <header>\n      <h2>Dynamic list Example</h2>\n    </header>\n    <content>\n      <div className=\"filter-container\">\n        <Input value={filter} onChange={handleFilterChange} placeholder=\"Try filtering...\" />\n        <InputNumber min={0} max={filteredCommands.length - 1} step={20} onChange={setRow} value={row} />\n        <Button onClick={jumpToRow}> Jump! </Button>\n      </div>\n      <div>\n      </div>\n      <div className=\"dynamic-list-container\">\n        <DynamicList ref={dynamicListRef} data={filteredCommands} width={600} height={600}>\n          {({ index, style }) => (\n            <div style={style}>\n              <pre style={{ whiteSpace: \"inherit\" }}>{filteredCommands[index].output}</pre>{\" \"}\n            </div>\n          )}\n        </DynamicList>\n      </div>\n    </content>\n  </div>\n}\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}